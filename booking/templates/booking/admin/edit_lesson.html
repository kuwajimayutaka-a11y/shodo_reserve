{% extends "base.html" %}

{% block title %}授業枠編集{% endblock %}

{% block content %}
<h2>授業枠編集</h2>

<div style="margin-bottom: 20px;">
    <a href="{% url 'admin_lesson_list' %}" style="color: #007bff; text-decoration: none;">← 授業枠一覧に戻る</a>
</div>

<div style="margin: 20px 0; padding: 15px; background-color: #e7f3ff; border: 1px solid #b3d9ff; border-radius: 4px;">
    <p style="margin: 0;"><strong>現在の授業:</strong> {% if lesson.title %}{{ lesson.title }}{% else %}書道教室{% endif %}</p>
    <p style="margin: 5px 0 0 0;"><strong>日時:</strong> {{ lesson.start_time|date:"Y年m月d日 H:i" }} - {{ lesson.end_time|date:"H:i" }}</p>
</div>

{% if messages %}
    {% for message in messages %}
        <div style="padding: 10px; margin: 10px 0; background-color: {% if message.tags == 'success' %}#d4edda{% elif message.tags == 'error' %}#f8d7da{% else %}#d1ecf1{% endif %}; border: 1px solid {% if message.tags == 'success' %}#c3e6cb{% elif message.tags == 'error' %}#f5c6cb{% else %}#bee5eb{% endif %}; border-radius: 4px;">
            {{ message }}
        </div>
    {% endfor %}
{% endif %}

<form method="post" style="max-width: 600px;">
    {% csrf_token %}
    
    <div style="margin-bottom: 20px;">
        <label for="{{ form.title.id_for_label }}" style="display: block; margin-bottom: 5px; font-weight: 600; color: #495057;">{{ form.title.label }}</label>
        {{ form.title }}
        {% if form.title.errors %}
            <div style="color: #dc3545; font-size: 0.9em; margin-top: 5px;">{{ form.title.errors }}</div>
        {% endif %}
    </div>

    <div style="margin-bottom: 20px;">
        <label for="{{ form.start_time.id_for_label }}" style="display: block; margin-bottom: 5px; font-weight: 600; color: #495057;">開始日時</label>
        {{ form.start_time }}
        {% if form.start_time.errors %}
            <div style="color: #dc3545; font-size: 0.9em; margin-top: 5px;">{{ form.start_time.errors }}</div>
        {% endif %}
    </div>

    <div style="margin-bottom: 20px;">
        <label for="{{ form.end_time.id_for_label }}" style="display: block; margin-bottom: 5px; font-weight: 600; color: #495057;">終了日時</label>
        {{ form.end_time }}
        {% if form.end_time.errors %}
            <div style="color: #dc3545; font-size: 0.9em; margin-top: 5px;">{{ form.end_time.errors }}</div>
        {% endif %}
    </div>

    <div style="margin-bottom: 20px;">
        <label for="{{ form.capacity.id_for_label }}" style="display: block; margin-bottom: 5px; font-weight: 600; color: #495057;">定員</label>
        {{ form.capacity }}
        {% if form.capacity.errors %}
            <div style="color: #dc3545; font-size: 0.9em; margin-top: 5px;">{{ form.capacity.errors }}</div>
        {% endif %}
    </div>

    <div style="margin-bottom: 20px;">
        <label for="{{ form.reservation_start_time.id_for_label }}" style="display: block; margin-bottom: 5px; font-weight: 600; color: #495057;">予約開始日時</label>
        {{ form.reservation_start_time }}
        {% if form.reservation_start_time.errors %}
            <div style="color: #dc3545; font-size: 0.9em; margin-top: 5px;">{{ form.reservation_start_time.errors }}</div>
        {% endif %}
    </div>

    {% if form.non_field_errors %}
        <div style="color: #dc3545; margin-bottom: 20px; padding: 10px; background-color: #f8d7da; border: 1px solid #f5c6cb; border-radius: 4px;">
            {{ form.non_field_errors }}
        </div>
    {% endif %}

    <div style="margin-top: 30px;">
        <button type="submit" style="padding: 10px 20px; background-color: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: 600; margin-right: 10px;">更新</button>
        <a href="{% url 'admin_lesson_list' %}" style="padding: 10px 20px; background-color: #6c757d; color: white; text-decoration: none; border-radius: 4px; display: inline-block;">キャンセル</a>
    </div>
</form>
{% endblock %}
